# Builder Pattern

- **Refactoring Guru – Builder Pattern**: [https://refactoring.guru/design-patterns/builder](https://refactoring.guru/design-patterns/builder)
- **Builder Pattern in Python (Hindi)**: [https://www.youtube.com/watch?v=PpKvPrl_gRg](https://www.youtube.com/watch?v=PpKvPrl_gRg)

#### 3.1. What is the Builder Pattern?

> **Separate the construction of a complex object from its representation so that the same construction process can create different representations.**

The **Builder** pattern focuses on constructing complex objects step-by-step. It lets you vary the internal representation while keeping construction logic consistent.

#### 3.2. Why use Builder?

| Benefit                            | Explanation                                                    |
| ---------------------------------- | -------------------------------------------------------------- |
| **Avoid telescoping constructors** | Replace many optional params with step-by-step fluent building |
| **Readable creation**              | Chain methods describe intent clearly                          |
| **Immutable end product**          | Build then finalize object                                     |
| **Different representations**      | Same steps can produce different variants                      |
| **Isolation of construction**      | Keep creation separate from business logic                     |

#### 3.3. When to use Builder?

- Object has many optional parameters or complex setup
- Need different representations of the same object
- Want to hide complex construction details
- Prefer fluent, readable configuration

#### 3.4. Structure of Builder

```text
Director (optional)
   └── Builder (interface)
         ├── ConcreteBuilderA
         └── ConcreteBuilderB
                └── builds → Product
```

#### 3.5. Python Example: Building a Computer

```python
from abc import ABC, abstractmethod

class Computer:
    def __init__(self):
        self.cpu = None
        self.ram_gb = None
        self.storage_gb = None
        self.gpu = None

    def __repr__(self):
        return f"Computer(cpu={self.cpu}, ram={self.ram_gb}GB, storage={self.storage_gb}GB, gpu={self.gpu})"

class Builder(ABC):
    @abstractmethod
    def set_cpu(self, model: str): ...
    @abstractmethod
    def set_ram(self, gb: int): ...
    @abstractmethod
    def set_storage(self, gb: int): ...
    @abstractmethod
    def set_gpu(self, model: str): ...
    @abstractmethod
    def build(self) -> Computer: ...

class GamingPCBuilder(Builder):
    def __init__(self):
        self._pc = Computer()
    def set_cpu(self, model: str):
        self._pc.cpu = model; return self
    def set_ram(self, gb: int):
        self._pc.ram_gb = gb; return self
    def set_storage(self, gb: int):
        self._pc.storage_gb = gb; return self
    def set_gpu(self, model: str):
        self._pc.gpu = model; return self
    def build(self) -> Computer:
        return self._pc

class OfficePCBuilder(Builder):
    def __init__(self):
        self._pc = Computer()
    def set_cpu(self, model: str):
        self._pc.cpu = model; return self
    def set_ram(self, gb: int):
        self._pc.ram_gb = gb; return self
    def set_storage(self, gb: int):
        self._pc.storage_gb = gb; return self
    def set_gpu(self, model: str):
        self._pc.gpu = model; return self
    def build(self) -> Computer:
        return self._pc

# Director (optional)
class PCDirector:
    def __init__(self, builder: Builder):
        self.builder = builder
    def build_basic(self):
        return (self.builder
                .set_cpu("i5")
                .set_ram(16)
                .set_storage(512)
                .set_gpu("Integrated")
                .build())

# Usage
gaming = (GamingPCBuilder()
          .set_cpu("Ryzen 7")
          .set_ram(32)
          .set_storage(2000)
          .set_gpu("RTX 4070")
          .build())

office = PCDirector(OfficePCBuilder()).build_basic()
```

#### 3.6. Builder vs Abstract Factory

| Aspect         | Builder                   | Abstract Factory             |
| -------------- | ------------------------- | ---------------------------- |
| **Focus**      | Step-by-step construction | Families of related products |
| **Output**     | 1 complex object          | Multiple related objects     |
| **Director**   | Optional                  | Not applicable               |
| **Fluent API** | Common                    | Rare                         |

#### 3.7. Advantages and Disadvantages of Builder

| Advantage         | Description                             |
| ----------------- | --------------------------------------- |
| **Clarity**       | Fluent steps make construction readable |
| **Flexibility**   | Different builders for variants         |
| **Encapsulation** | Hides complex assembly                  |

| Drawback         | Explanation                                  |
| ---------------- | -------------------------------------------- |
| **More classes** | Builders/Director add types                  |
| **Overhead**     | Simple objects don't need it                 |
| **Validation**   | Must ensure object completeness before build |

